<p-table #dt  [metaKeySelection]="true"
    selectionMode="single" 
            [value]="customers" dataKey="id" styleClass="p-datatable-customers"  [rowHover]="true"
            [rows]="10" [showCurrentPageReport]="true" [rowsPerPageOptions]="[10,25,50]" [loading]="loading"
            [(selection)]="selectedProduct1"
            [paginator]="true" currentPageReportTemplate="Показ с {first} по {last} из {totalRecords} страниц"
            [filterDelay]="0" [globalFilterFields]="['id', 'number','text', 'description', 'state_code', 'contractorName', 'create_date','state']">
            <ng-template pTemplate="caption">
                <div class="table-header grid grid-cols-3">
                    <div class="flex flex-row">
                        <div class="my-auto mr-4">
                            Список заявок 
                        </div>
                        
                    </div>
                    <div class="flex">
                        
                    </div>
                    <div class="grid col-start-3 col-span-2">
                 <span class="p-input-icon-left" >
                        <i class="pi pi-search"></i>
                        <input pInputText type="text"  class="w-full" (input)="filterGlobal()" [(ngModel)]="globalText" placeholder="Поиск по таблице" />
                    </span>
                     </div>  
                </div>         
            </ng-template>
            <ng-template pTemplate="header">
                <tr >
                    <th pSortableColumn="id" style="min-width:10px">
                        <div class="flex justify-content-center align-items-center">
                            №
                            <p-columnFilter type="text" field="id" display="menu"></p-columnFilter>
                            <p-sortIcon field="id" ></p-sortIcon>
                        </div>
                     
                    </th>
                    <th pSortableColumn="machineTypeCaption" style="min-width:100px">
                        <div class="flex justify-content-center align-items-center">
                           Тип станка
                            <p-columnFilter type="text" field="machineTypeCaption" display="menu"></p-columnFilter>
                            <p-sortIcon field="machineTypeCaption"></p-sortIcon>
                        </div>
                     
                    </th>
                 
                    <th pSortableColumn="port" style="min-width:100px"> 
                        <div class="flex justify-content-center align-items-center">
                            Порт 
                            <p-columnFilter type="text" field="port" display="menu"></p-columnFilter>
                            <p-sortIcon field="port"></p-sortIcon>
                        </div>
                    </th>
                    <th pSortableColumn="isDeleted" style="min-width:100px">
                        <div class="flex justify-content-center align-items-center">
                            Состояние
                            <p-columnFilter type="text" field="isDeleted" display="menu"></p-columnFilter>
                            <p-sortIcon field="isDeleted"></p-sortIcon>
                        </div>
                    </th>
                    <th pSortableColumn="state" style="min-width:100px"> 
                        <div class="flex justify-content-center align-items-center">
                            Статус 
                            <p-columnFilter type="text" field="state" display="menu"></p-columnFilter>
                            <p-sortIcon field="state"></p-sortIcon>
                        </div>
                    </th>

        
                </tr>
               
            </ng-template>
            <ng-template  pTemplate="body" let-customer>
                <tr [pSelectableRow]="customer" >
        
                    <td>
                        <span class="p-column-title">№</span>
                        {{customer.id}}
                    </td>
   
                    <td>
                        <span class="p-column-title">Тип станка</span>
                        {{customer.machineTypeCaption}}
                    </td>
                    <td>
                        <span class="p-column-title">Порт</span>
                        {{customer.port}}
                    </td>

                    <td>
                        <span class="p-column-title">Состояние</span>
                        {{customer.isDeleted}}
                    </td>
                    <td>
                        <span class="p-column-title" >Статус</span>
                        <p-chip label="{{customer.state}}" icon="pi pi-cog" *ngIf="customer.state==null"  tooltipPosition="bottom" pTooltip="{{customer.state}}" ></p-chip>
                        <p-chip label="{{customer.state}}" icon="pi pi-cog" *ngIf="customer.state!=null" tooltipPosition="bottom" pTooltip="{{customer.state}}" ></p-chip>                      
                    </td>

                    
                    
                    <!-- <td>
                        <span class="p-column-title">Activity</span>
                        <p-progressBar [value]="customer.activity" [showValue]="false"></p-progressBar>
                    </td> -->
           
                    
                </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage">
                <tr>
                    <td colspan="8">Заявки не найдены.</td>
                </tr>
            </ng-template>
        </p-table>